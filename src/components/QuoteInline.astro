---
const { title = "Request a fast quote" } = Astro.props;
const action = "https://formspree.io/f/xpwqlqjb";
const path = Astro.url?.pathname || '';
---
<section class="mt-10 rounded-2xl bg-[var(--brand-surface)] p-6 ring-1 ring-white/10">
  <h2 class="text-xl font-bold">{title}</h2>
  <form action={action} method="POST" class="mt-4 grid gap-3 sm:grid-cols-2" onsubmit="if(window && window.dataLayer){window.dataLayer.push({event:'lead_submit', source:'inline_form', path: location.pathname});} if(window && window.gtag_report_form_conversion){gtag_report_form_conversion(this);} else if(window && window.gtag_report_conversion){gtag_report_conversion();}">
    <input type="hidden" name="_subject" value="Website enquiry â€” Window Maintenance" />
    <input type="hidden" name="_redirect" value="/thanks/" />
    <input type="hidden" name="source_page" value={path} />
    <input type="text" name="_honeypot" style="display:none" tabindex="-1" autocomplete="off" />
    <label class="grid gap-1">
      <span class="text-sm">Name</span>
      <input name="name" required class="rounded-lg bg-[var(--brand-bg)] px-3 py-2 ring-1 ring-white/10" />
    </label>
    <label class="grid gap-1">
      <span class="text-sm">Phone</span>
      <input name="phone" type="tel" required class="rounded-lg bg-[var(--brand-bg)] px-3 py-2 ring-1 ring-white/10" />
    </label>
    <label class="grid gap-1 sm:col-span-2">
      <span class="text-sm">What needs fixing?</span>
      <textarea name="message" rows="3" class="w-full rounded-lg bg-[var(--brand-bg)] px-3 py-2 ring-1 ring-white/10"></textarea>
    </label>
    <div class="sm:col-span-2 flex gap-3">
      <button class="btn btn-primary" type="submit">Get quote</button>
      <a class="btn btn-outline" href="tel:+6421638205" data-cta="call">Call 021 638 205</a>
    </div>
  </form>
</section>
