---
import Layout from "../../layouts/WMBase.astro";
import { getCollection } from "astro:content";
const posts = (await getCollection("blog")).filter((post) => post.data.listed !== false);
posts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
const title = "Window Maintenance Blog | Wellington window & door repairs";
const description = "Guides and job recaps for aluminium window repairs, sliding door rollers, track fixes and leak reseals in Wellington, Porirua and the Hutt Valley.";
const canonical = "https://windowmaintenance.co.nz/blog/";
---
<Layout title={title} description={description} canonical={canonical}>
  <main class="mx-auto max-w-4xl px-6 py-12">
    <h1 class="text-3xl font-extrabold">Blog</h1>
    <section class="mt-4 grid gap-4 rounded-2xl bg-[var(--brand-surface)] p-5 ring-1 ring-white/10 text-sm text-slate-200">
      <div class="text-xs font-semibold uppercase tracking-[0.3em] text-amber-400">Top services</div>
      <div class="flex flex-wrap gap-3">
        <a class="btn btn-secondary" href="/services/sliding-door-repairs/">Sliding door repairs</a>
        <a class="btn btn-secondary" href="/services/mitre-reseal/">Mitre &amp; sill reseal</a>
        <a class="btn btn-secondary" href="/leaks/">Draught &amp; leak fixes</a>
        <a class="btn btn-secondary" href="/services/window-repairs/">Window repairs</a>
        <a class="btn btn-secondary" href="/stays/">Awning stays &amp; hinges</a>
      </div>
    </section>
    <ul class="mt-6 space-y-6">
      {posts.map((post) => (
        <li class="rounded-xl bg-[var(--brand-surface)] p-6 ring-1 ring-white/10">
          <a href={`/blog/${post.slug}/`} class="block hover:text-amber-400">
            <h2 class="text-xl font-semibold">{post.data.title}</h2>
            <div class="mt-1 text-xs text-slate-400">{new Date(post.data.pubDate).toLocaleDateString()}</div>
            {post.data.description && <p class="mt-2 text-slate-300">{post.data.description}</p>}
          </a>
        </li>
      ))}
    </ul>
  </main>
</Layout>
